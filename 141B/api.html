<!DOCTYPE html>
<!-- This page was generated by GitHub Pages using the Cayman theme by Jason Long -->
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>141B: Lesson 10</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="../stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">141B: Lesson 10</h1>
      <h2 class="project-tagline">HTTP, APIs, and JSON</h2>
    </section>

    <section class="main-content">
<h3>The Internet and HTTP</h3>

<p>
  The internet (you may have heard of it) is a system of computer networks that uses internet protocols to link communicating devices.
  The internet is dictated by network protocols, which are rules by which computers communicate.
  Each protocol is designed for a certain task and is specific to a type of data, physical devices, or application..
  So for example, the Simple Mail Transfer Protocol (SMTP) and Post Office Protocol (POP), are agreements on how email clients and servers create and parse messages.
  These protocols are mostly open source, such as HTTP, but some are proprietary, like the Yahoo! Instant Messenger Protocol.
  The cryptocurrency, Bitcoin, has an associated protocol that specifies how bitcoins are sent and recieved.
  The internet protocol suite is a stack of interdependent protocols that power the internet, allowing for the routing of packets (IP), the interaction with physical components (MAC/Ethernet/etc.), the error-free transmission of data (TCP), and the application layer that standardizes communication (HTTP).
  You can see a list of network protocols at <a href="https://en.wikipedia.org/wiki/Lists_of_network_protocols">this wikipedia page</a>.
</p>
<p>
  Bob Kahn and Vinton Cerf developed TCP/IP for DARPA, the research arm of the Department of Defense.
  The computer network at the time was called ARPANET, and the protocols multiplied as TCP spawned IP, and other researchers joined the project.
  Later Tim Berners-Lee at the European Organization for Nuclear Research (CERN) developed the Hypertext Transfer Protocol (HTTP).
  HTTP is the application protocol that is the basis for the world wide web.
  We will discuss more about HTML, the hypertext markup language in another lesson, but for now, just know that it allows for nodes to be linked to one another (via URIs) and these nodes have structured text.
  HTTP standards are maintained and updated by the Internet Engineering Task Force (IETF) and the World Wide Web Consortium (W3C).
  A very interesting account of the development and implications of the internet can be found in the documentary, "Lo and Behold, Reveries of the Connected World" by Werner Herzog (available on Netflix as of Feb 2017).
</p>
<p>
  Network protocols that are maintained by the IETF are published in Request for Comment (RFC) documents.
  For example, we can see the first RFC for HTTP (<a href="https://tools.ietf.org/html/rfc1945">RFC 1945</a>) has the following abstract.
<center><pre>Network Working Group                                     T. Berners-Lee
Request for Comments: 1945                                       MIT/LCS
Category: Informational                                      R. Fielding
                                                               UC Irvine
                                                              H. Frystyk
                                                                 MIT/LCS
                                                                May 1996


Hypertext Transfer Protocol -- HTTP/1.0
    
Abstract

   The Hypertext Transfer Protocol (HTTP) is an application-level
   protocol with the lightness and speed necessary for distributed,
   collaborative, hypermedia information systems. It is a generic,
   stateless, object-oriented protocol which can be used for many tasks,
   such as name servers and distributed object management systems,
   through extension of its request methods (commands). A feature of
   HTTP is the typing of data representation, allowing systems to be
   built independently of the data being transferred.
</pre></center>
  HTTP is based on the client-server computing model, where a client, typically a web browser, and an application on a web server, communicate to serve web content.
  One common open-source web server application is Apache (which is also the name of its parent organization that later developed the web browser Firefox).
  HTTP is a request-response protocol, meaning that clients make requests for content and then the server makes a response.
  There are several request methods to HTTP, notably GET which is used to retrieve data, and POST which asks the server to accept data at a URI.  
</p>

<h3>Web APIs</h3>
<p>
  An application programming interface (API) is a set of methods by which software components communicate.
  Web APIs define how HTTP request methods can be used to access and modify data on the server.
  In modern web APIs you specify the URL of the API, such as <code>http://api.petfinder.com/subsystem.method</code> indicating the method, then specify arguments, and the desired data format (JSON, XML, etc.).
  In the following video, we use the petfinder API to find animals up for adoption on petfinder.com.
  To follow along you will have to get a <a href="https://www.petfinder.com/developers/api-key">api key</a> and save it as the key variable.
  </p>

<h4>Checkpoint: While you go through the code, look at <a href="https://www.petfinder.com/developers/api-docs">petfinder's API documentation</a> and follow along with the <a href="code/PetAPI.ipynb">jupyter notebook</a>.</h4>

      <div class="youtube">
	<iframe width="560" height="315" src="https://www.youtube.com/embed/kUlrJcJdbXI" frameborder="0" allowfullscreen></iframe>
	<b>Web API basics</b>
      </div>


<h3>URLs and JSON</h3>

<p>
  The urls follow a certain format according to other RFCs that specify how URLs should be written.
  The basic idea is that the URL can be broken into the following components: scheme, network location, hierarchical path, parameters, query, and fragment identifier.
  It follows the basic format: <code>scheme://netloc/path;parameters?query#fragment</code>.
  The scheme can be <code>file, ftp, http, https,...</code>, the netloc is typically the host root url, like <code>www.google.com</code>, the path is a typical relative path, then the parameters and query specify arguments for GET, POST, PUT, etc.
  So if we take the url <code>http://api.petfinder.com/my.method?key=12345&arg1=foo&token=67890&sig=abcdef</code> then it has scheme <code>http</code>, netloc of <code>api.petfinder.com</code>, path of <code>my.method</code>, and query is <code>key=12345&arg1=foo&token=67890&sig=abcdef</code>.
  The functions <code>urlparse, urlunparse</code> will let you go from a url to a iterable of these components and back again.
</p>

<h4>Checkpoint: look at the methods urlparse and urlunparse at <a href="https://docs.python.org/2/library/urlparse.html">the urlparse documentation</a>.</h4>

<p>
  JSON, which is also specified by an RFC, like HTTP, is a simple data exchange format.
  It is used for objects that are not necessarily simple lists or tables.
  You should think of JSON in the same way that you think of CSV, it determines a way to turn a python object into a string that can be sent via HTTP or written to a file.
  This conversion is called serialization, and to convert back is called deserialization.
  JSON is very flexible since it is based on dictionaries and lists (called objects and arrays in JSON), and you can nest these in complex ways.
  So for example, a matrix could be written as a list of lists, a DataFrame is a dictionary with column names for keys and lists for values, etc.
  You can see a detailed description of JSON at <a href="http://json.org">json.org</a>.
</p>

<h4>Checkpoint: Read through the basic JSON description at <a href="http://json.org">the json documentation page.</a></h4>

      <div class="youtube">
	<iframe width="560" height="315" src="https://www.youtube.com/embed/rhehpA92aN8" frameborder="0" allowfullscreen></iframe>
	<b>JSON and url parsing</b>
      </div>

      <div class="youtube">
	<iframe width="560" height="315" src="https://www.youtube.com/embed/gq90xWK1W-4" frameborder="0" allowfullscreen></iframe>
	<b>Sampling dogs, breed distribution</b>
      </div>

<h4>Checkpoint: Go through the jupyter notebook.  You will have to get your own key from petfinder to make the api calls.</h4>
      


     <footer class="site-footer">
	Copyright James Sharpnack &copy; 2016
     </footer>

    </section>

  
  </body>
</html>
